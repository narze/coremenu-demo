<!DOCTYPE html>
<html>
<head>
  <title>ขอเมนู</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://unpkg.com/vue"></script>
  <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>
  <div id="app">
    <nav class="flex items-center justify-between flex-wrap bg-teal-500 p-3">
      <div class="flex items-center flex-shrink-0 text-white mr-6">
        <span class="font-semibold text-xl tracking-tight">ตำปากเปิด</span>
      </div>
    </nav>

    <div class="bg-gray-200 px-4 py-2">
      <menu-item
        v-for="item in menuList"
        v-bind:menu="item"
        v-bind:key="item.id">
      </menu-item>
    </div>

    <div class="bg-gray-200 px-4 pb-4">
      <button v-on:click="finalize" class="w-full bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-b-4 border-blue-700 hover:border-blue-500 rounded">
        รวมออเดอร์
      </button>
    </div>

  </div>

  <script>
    Vue.component('menu-item', {
      props: ['menu'],
      template: `
        <div class="block rounded text-gray-700 text-center bg-gray-400 px-2 py-2 my-2 flex">
          <img class="h-20 w-20 rounded mx-0 mr-2" v-bind:src="menu.imageUrl">
          <div class="text-left">
            <div>{{ menu.name }}</div>
            <div class="inline-flex transform scale-75">
              <button v-on:click="decrement" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l">
                -
              </button>
              <input v-model="menu.amount" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" placeholder="จำนวน">
              <button v-on:click="increment" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r">
                +
              </button>
            </div>
          </div>
        </div>
      `,
      methods: {
        increment: function (event) {
          this.menu.amount += 1
        },
        decrement: function (event) {
          this.menu.amount -= 1

          if (this.menu.amount < 0) {
            this.menu.amount = 0
          }
        }
      }
    })

    var app = new Vue({
      el: '#app',
      data: {
        menuList: [
          { id: 1, name: "หมูร้องไห้", imageUrl: "/images/01.jpg", amount: 0 },
          { id: 2, name: "ตำข้าวโพด", imageUrl: "/images/02.jpg", amount: 0 },
          { id: 3, name: "ตำทะเลปากเปิด", imageUrl: "/images/03.jpg", amount: 0 },
        ]
      },
      methods: {
        finalize: function (event) {

        }
      }
    })
  </script>
</body>
</html>
